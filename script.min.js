window.addEventListener("DOMContentLoaded",(e=>{Brand.init(["Chevrolet","Buick","GMC","Cadillac"]),Size.init(["trucks","mpv/van","crossover/suv","luxury","large","midsize","sport","small/compact"]),document.querySelectorAll(".parse-input").forEach((e=>{const t=document.getElementById("input-field"),i="edit"===e.dataset.act;e.addEventListener("click",(e=>{const l=t.value,a=l?JSON.parse(l):{};Vehicle.init(a.vehicles||[],i)}))}))}));class Vehicle{static all=[];static details=[];static template;static cardList;static counter;static output;constructor(e,t=!1){Vehicle.all.push(this),this.id=Vehicle.all.length,this.imageSource,this.details={id:this.id,name:{},brand:"",year:"",image:{src:"",alt:{},title:{}},size:0,link:{href:{}},build:{href:{}}},e&&(this.details.name=e.name,this.details.brand=e.brand,this.details.year=e.year,this.details.image=e.image,this.details.size=e.size,this.details.link=e.link,this.details.build=e.build),e&&!t||this.createCard(t),Vehicle.details.push(this.details)}static init(e,t){Vehicle.template=document.getElementById("template-vehicle-card").content,Vehicle.cardList=document.getElementById("vehicle-list"),Vehicle.counter=document.getElementById("vehicle-count"),Vehicle.output=document.getElementById("output-field"),e.forEach((e=>new Vehicle(e,t))),document.getElementById("generate-cards").addEventListener("submit",(e=>{const t=parseInt(document.getElementById("new-count").value)||1;e.preventDefault(),Vehicle.addVehicle(t)})),document.querySelectorAll(".generate-output").forEach((e=>{const t="minify"===e.dataset.act;e.addEventListener("click",(e=>{Vehicle.dumpOutput(t)}))})),document.getElementById("input").setAttribute("hidden",""),document.getElementById("vehicle").removeAttribute("hidden"),document.getElementById("output").removeAttribute("hidden"),Vehicle.updateCount()}static addVehicle(e=1){for(let t=0;t<e;t++)new Vehicle;Vehicle.updateCount()}static dumpOutput(e=!0){const t={vehicles:Vehicle.details,vehicleBrands:Brand.vehicleBrands,vehicleSize:Size.vehicleSize};Vehicle.output.value=e?JSON.stringify(t):JSON.stringify(t,!1,"  ")}static updateCount(){Vehicle.counter.value=Vehicle.all.length}createCard(e=!1){this.element=Vehicle.template.cloneNode(!0),this.element.querySelector("h3").textContent=this.id,this.element.querySelector('[data-field="brand"]').appendChild(Brand.clone()),this.element.querySelector('[data-field="size"]').appendChild(Size.clone()),this.element.querySelectorAll("[name]").forEach((e=>{const t=e.name.split("-");let i;if("image"===t[0]){const e=this.details.image.src.split("/"),t=e[e.length-1];this.imageSource=t,i=t}else i=3===t.length?this.details[t[0]][t[1]][t[2]]:2===t.length?this.details[t[0]][t[1]]:this.details[t[0]];e.value=i||""})),this.element.querySelectorAll("input, select").forEach((e=>{e.addEventListener("change",(e=>{this.updateAttribute(e.target)}))})),Vehicle.cardList.appendChild(this.element)}updateAttribute(e){const t=e.name.split("-"),i=e.value.trim();"name"===t[0]?(this.details.name[t[1]]=i,this.details.image.alt[t[1]]=i,this.details.image.title[t[1]]=i):"image"===t[0]?this.imageSource=i:3===t.length?this.details[t[0]][t[1]][t[2]]=i:2===t.length?this.details[t[0]][t[1]]=i:this.details[t[0]]=i,"year"!==t[0]&&"brand"!==t[0]&&"image"!==t[0]||(this.details.image.src="/content/img/jellybeans/"+this.details.year+"/"+this.details.brand+"/"+this.imageSource)}}class Brand{static all=[];static vehicleBrands={english:["All"],french:["Tout"]};static template;static templateSelect;constructor(e){Brand.all.push(this),this.id=Brand.all.length,this.name=e;const t=document.createElement("option");t.value=this.name,t.text=this.name,Brand.templateSelect.add(t),Brand.vehicleBrands.english.push(this.name),Brand.vehicleBrands.french.push(this.name)}static init(e){Brand.template=document.getElementById("template-brand-select").content,Brand.templateSelect=Brand.template.querySelector("select"),e.forEach((e=>new Brand(e)))}static clone(){return Brand.template.cloneNode(!0)}}class Size{static all=[];static vehicleSize={};static template;static templateSelect;constructor(e){Size.all.push(this),this.id=Size.all.length,this.name=e;const t=document.createElement("option");t.value=this.id,t.text=this.name,Size.templateSelect.add(t),Size.vehicleSize[this.name]=this.id}static init(e){Size.template=document.getElementById("template-size-select").content,Size.templateSelect=Size.template.querySelector("select"),e.forEach((e=>new Size(e)))}static clone(){return Size.template.cloneNode(!0)}}
//# sourceMappingURL=script.min.js.map